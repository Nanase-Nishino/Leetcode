class Solution {
public:
    int subarraysDivByK(vector<int>& A, int K) {
       unordered_map<int,int> m;
       m[0]=1;//余数为0时增加配对
       int sum=0;
       int ans=0;
       for(int i=0;i<A.size();i++)
       {
           if(A[i]<0)
               A[i]=K-abs(A[i])%K;
            sum+=A[i];
            int x=sum%K;
            if(m.count(x))
                ans+=m[x];
            m[x]++;
       }
        return ans;
    }
};